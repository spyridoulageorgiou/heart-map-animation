<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hearts Pick People</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Pacifico&display=swap');
        
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #fef3f3;
            font-family: 'Dancing Script', cursive;
            position: relative;
        }
        svg {
            width: 600px;
            height: 500px;
        }
        text {
            font-size: 20px;
            fill: #d72638;
            text-anchor: middle;
        }
        .heart-text {
            font-size: 28px;
            font-weight: bold;
            margin-top: 20px;
            font-family: 'Pacifico', cursive;
            color: #d72638;
        }
        .heart-emoji {
            font-size: 35px;
            position: absolute;
            opacity: 0;
            animation: heartbeat 0.6s infinite alternate;
            transform: translate(-50%, -50%);
        }
        @keyframes heartbeat {
            from { transform: scale(1); }
            to { transform: scale(1.3); }
        }
    </style>
</head>
<body>
    <svg id="map">
        <!-- Use the newly uploaded map image -->
        <image href="./heartmap.png" x="50" y="50" width="500" height="400" />
    </svg>
    <p class="heart-text">Hearts pick people, not places ❤️</p>
    <div id="heart" class="heart-emoji">❤️</div>

    <script>
        const svg = d3.select("#map");
        const heart = document.getElementById("heart");

        // Adjusted points for Bern (Switzerland) and Beirut (Lebanon)
        const bern = { x: 215, y: 225 };  // Switzerland (Bern)
        const beirut = { x: 460, y: 330 }; // Lebanon (Beirut)
        const meetingPoint = { x: 340, y: 280 }; // Where the lines meet

        // Draw Bern and Beirut markers
        svg.append("circle").attr("cx", bern.x).attr("cy", bern.y).attr("r", 6).attr("fill", "red");
        svg.append("circle").attr("cx", beirut.x).attr("cy", beirut.y).attr("r", 6).attr("fill", "red");
        
        // Create two straight lines to the meeting point
        const path1 = d3.path();
        path1.moveTo(bern.x, bern.y);
        path1.lineTo(meetingPoint.x, meetingPoint.y);

        const path2 = d3.path();
        path2.moveTo(beirut.x, beirut.y);
        path2.lineTo(meetingPoint.x, meetingPoint.y);

        // Animate both straight paths simultaneously
        svg.append("path")
            .attr("d", path1.toString())
            .attr("fill", "none")
            .attr("stroke", "red")
            .attr("stroke-width", 3)
            .attr("stroke-dasharray", "300")
            .attr("stroke-dashoffset", "300")
            .transition()
            .duration(1500)
            .ease(d3.easeLinear)
            .attr("stroke-dashoffset", "0");

        svg.append("path")
            .attr("d", path2.toString())
            .attr("fill", "none")
            .attr("stroke", "red")
            .attr("stroke-width", 3)
            .attr("stroke-dasharray", "300")
            .attr("stroke-dashoffset", "300")
            .transition()
            .duration(1500)
            .ease(d3.easeLinear)
            .attr("stroke-dashoffset", "0")
            .on("end", function() {
                // Show the heart emoji after both lines are drawn
                heart.style.left = (meetingPoint.x + 200) + "px";
                heart.style.top = (meetingPoint.y + 42) + "px";
                heart.style.opacity = 1;
            });
    </script>
</body>
</html>
